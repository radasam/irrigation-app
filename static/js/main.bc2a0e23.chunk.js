(this["webpackJsonpwater-front-end"]=this["webpackJsonpwater-front-end"]||[]).push([[0],{40:function(e,t,a){},57:function(e,t,a){e.exports=a(84)},62:function(e,t,a){},84:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),l=a(12),r=a.n(l),s=(a(62),a(63),a(11)),c=a(10),u=a(17),i=a(14),d=a(18),m=(a(40),a(42)),p=a(39),h=a(8),E=a.n(h),g=a(29),f=a(7),v=a(4),y=a(22),k=a(28),b=(o.a.Component,a(56)),S=a(43),O=a(33),w=a(9),C=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(i.a)(t).call(this,e))).state={option:"off",forms:1,scheduleOption:"",schedule:[{time:"",days:"",duration:""}],selectOption:"",threshold:""},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"scheduleHTML",value:function(e){var t=this;switch(console.log(this.state.forms,this.state.schedule),e){default:return o.a.createElement(v.a.Group,null,Object(S.a)(Array(this.state.forms).keys()).map((function(e){return 0==e?o.a.createElement(v.a.Row,{key:e},o.a.createElement(v.a.Label,{column:"sm",lg:.5},"Time"),o.a.createElement(w.a,null,o.a.createElement(v.a.Control,{defaultValue:t.state.schedule[e].time,id:"time-"+t.props.id+"-"+e,type:"time"})),o.a.createElement(v.a.Label,{column:"sm",lg:.5},"Duration"),o.a.createElement(w.a,null,o.a.createElement(v.a.Control,{defaultValue:t.state.schedule[e].duration,id:"duration-"+t.props.id+"-"+e,type:"number"}))):o.a.createElement(v.a.Row,{key:e,style:{paddingTop:"5px"}},o.a.createElement(v.a.Label,{column:"sm",lg:.5},"Time"),o.a.createElement(w.a,null,o.a.createElement(v.a.Control,{defaultValue:t.state.schedule[e].time,id:"time-"+t.props.id+"-"+e,type:"time"})),o.a.createElement(v.a.Label,{column:"sm",lg:.5},"Duration"),o.a.createElement(w.a,null,o.a.createElement(v.a.Control,{defaultValue:t.state.schedule[e].duration,id:"duration-"+t.props.id+"-"+e,type:"number"})))})));case"scheduleday":return o.a.createElement("div",null,o.a.createElement(v.a.Group,null,Object(S.a)(Array(this.state.forms).keys()).map((function(e){return 0==e?o.a.createElement(v.a.Row,{key:e},o.a.createElement(w.a,null,o.a.createElement(v.a.Control,{defaultValue:t.state.schedule[e].days,id:"scheduleday-"+t.props.id+"-"+e,as:"select"},o.a.createElement("option",null,"Monday"),o.a.createElement("option",null,"Tuesday"),o.a.createElement("option",null,"Wednesday"),o.a.createElement("option",null,"Thursday"),o.a.createElement("option",null,"Friday"),o.a.createElement("option",null,"Saturday"),o.a.createElement("option",null,"Sunday"))),o.a.createElement(v.a.Label,{column:"sm",lg:.5},"Time"),o.a.createElement(w.a,null,o.a.createElement(v.a.Control,{defaultValue:t.state.schedule[e].time,id:"time-"+t.props.id+"-"+e,type:"time"})),o.a.createElement(v.a.Label,{column:"sm",lg:.5},"Duration"),o.a.createElement(w.a,null,o.a.createElement(v.a.Control,{defaultValue:t.state.schedule[e].duration,id:"duration-"+t.props.id+"-"+e,type:"number"}))):o.a.createElement(v.a.Row,{key:e,style:{paddingTop:"5px"}},o.a.createElement(w.a,null,o.a.createElement(v.a.Control,{defaultValue:t.state.schedule[e].days,id:"scheduleday-"+t.props.id+"-"+e,as:"select"},o.a.createElement("option",null,"Monday"),o.a.createElement("option",null,"Tuesday"),o.a.createElement("option",null,"Wednesday"),o.a.createElement("option",null,"Thursday"),o.a.createElement("option",null,"Friday"),o.a.createElement("option",null,"Saturday"),o.a.createElement("option",null,"Sunday"))),o.a.createElement(v.a.Label,{column:"sm",lg:.5},"Time"),o.a.createElement(w.a,null,o.a.createElement(v.a.Control,{defaultValue:t.state.schedule[e].time,id:"time-"+t.props.id+"-"+e,type:"time"})),o.a.createElement(v.a.Label,{column:"sm",lg:.5},"Duration"),o.a.createElement(w.a,null,o.a.createElement(v.a.Control,{defaultValue:t.state.schedule[e].duration,id:"duration-"+t.props.id+"-"+e,type:"number"})))}))))}}},{key:"settingsHTML",value:function(e,t,a){var n=this;switch(console.log("running settings",e),e){case"off":return o.a.createElement(O.a,null,o.a.createElement(w.a,null,o.a.createElement(f.a,{onClick:function(e){return n.saveSettings()},style:{float:"right"}},"Save")));case"auto":return o.a.createElement("div",{key:this.props.id},o.a.createElement(v.a.Group,null,o.a.createElement(v.a.Row,null,o.a.createElement(v.a.Label,{column:"sm",lg:2},"Water Threshold"),o.a.createElement(w.a,null,o.a.createElement(v.a.Control,{defaultValue:a,id:"threshold-"+this.props.id,type:"number"})))),o.a.createElement(O.a,null,o.a.createElement(w.a,null,o.a.createElement(f.a,{onClick:function(e){return n.saveSettings()},style:{float:"right"}},"Save"))));case"schedule":case"scheduleday":return o.a.createElement("div",{key:this.props.id},o.a.createElement(v.a.Group,null,o.a.createElement(v.a.Control,{defaultValue:t,onChange:function(e){return n.switchScheduleOption()},id:"scheduleOption",as:"select"},o.a.createElement("option",{value:"schedule"},"Daily"),o.a.createElement("option",{value:"scheduleday"},"Specify Days"))),this.scheduleHTML(t),o.a.createElement(O.a,null,o.a.createElement(w.a,null,o.a.createElement(f.a,{onClick:function(e){return n.saveSettings()},size:"sm",style:{float:"right"}},"Save"),o.a.createElement(f.a,{onClick:function(e){return n.addForm()},size:"sm",style:{float:"right",paddingRight:"17px",paddingLeft:"17px",marginRight:"10px"}},"+"))));default:return o.a.createElement("div",null,"null")}}},{key:"switchScheduleOption",value:function(){this.setState({scheduleOption:document.getElementById("scheduleOption").value})}},{key:"switchOption",value:function(){this.setState({option:document.getElementById("pumpSettingsOption-"+this.props.id).value})}},{key:"addForm",value:function(){var e=this.state.schedule.slice();e.push({time:"",days:"",duration:""}),this.setState({schedule:e,forms:this.state.forms+1})}},{key:"saveSettings",value:function(){var e="https://6096dd03.ngrok.io";localStorage.ngrok&&(e=localStorage.ngrok);var t={};if("schedule"==this.state.option||"scheduleday"==this.state.option){var a="",n="",o="",l="",r=null;for(r=document.evaluate("//input[contains(@id,'time-"+this.props.id+"')]",document,null,XPathResult.ORDERED_NODE_ITERATOR_TYPE,null);null!==l;)(l=r.iterateNext())&&(n=n+l.value+";");for(l="",r=document.evaluate("//input[contains(@id,'duration-"+this.props.id+"')]",document,null,XPathResult.ORDERED_NODE_ITERATOR_TYPE,null);null!==l;)(l=r.iterateNext())&&(o=o+l.value+";");if(t.type="schedule","scheduleday"==this.state.scheduleOption){for(l="",r=document.evaluate("//select[contains(@id,'scheduleday-"+this.props.id+"')]",document,null,XPathResult.ORDERED_NODE_ITERATOR_TYPE,null);null!==l;)(l=r.iterateNext())&&(a=a+l.value+";");a=a.substring(0,a.length-1),t.days=a,t.type="scheduleday"}n=n.substring(0,n.length-1),o=o.substring(0,o.length-1),t.times=n,t.durations=o}switch(this.state.option){case"off":t=Object(b.a)({pumpid:this.props.id,type:"off",pass:document.getElementById("postpass").value},"pass",document.getElementById("postpass").value);break;case"auto":t={pumpid:this.props.id,type:"auto",threshold:parseInt(document.getElementById("threshold-"+this.props.id).value),pass:document.getElementById("postpass").value};break;case"schedule":case"scheduleday":t.pumpid=this.props.id,t.pass=document.getElementById("postpass").value;break;default:t={}}console.log(t),E.a.post(e+"/updatestatus",t,{crossdomain:!0}).then((function(e){console.log(e.data)}))}},{key:"optionSelectHTML",value:function(e){var t=this;return e=e.replace("day",""),console.log(e),o.a.createElement(v.a,null,o.a.createElement(v.a.Group,null,o.a.createElement(v.a.Control,{key:e,id:"pumpSettingsOption-"+this.props.id,defaultValue:e,onChange:function(e){return t.switchOption()},as:"select"},o.a.createElement("option",{value:"off"},"Off"),o.a.createElement("option",{value:"auto"},"Auto Water"),o.a.createElement("option",{value:"schedule"},"Schedule"))))}},{key:"render",value:function(){return o.a.createElement("div",{className:"pumpsettings",key:"settings"+this.props.id},o.a.createElement("div",{style:{paddingBottom:"10px"}},"Settings"),this.optionSelectHTML(this.state.option),this.settingsHTML(this.state.option,this.state.scheduleOption,this.state.threshold))}}],[{key:"getDerivedStateFromProps",value:function(e){switch(e.status.type){case"off":return{option:e.status.type};case"auto":return{option:e.status.type,threshold:e.status.threshold};case"schedule":case"scheduleday":return{option:e.status.type,forms:e.status.schedule.length,schedule:e.status.schedule,scheduleOption:e.status.type}}}}]),t}(o.a.Component),T=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(i.a)(t).call(this,e))).state={showModal:!1,postPass:"",pump1status:{},pump2status:{},pump3status:{},pump4status:{}},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"toggleModal",value:function(){this.state.showModal?this.setState({showModal:!1}):this.setState({showModal:!0})}},{key:"startpump",value:function(e){var t="https://6096dd03.ngrok.io";localStorage.ngrok&&(t=localStorage.ngrok),console.log("starting pump");var a={pump:e,pass:document.getElementById("postpass").value};E.a.post(t+"/start",a,{crossdomain:!0}).then((function(e){console.log(e)}),(function(e){console.log(e)}))}},{key:"componentDidMount",value:function(){this.drawsensorcharts(),this.drawpumpcharts(),this.fetchstatus()}},{key:"burst",value:function(e,t){var a="https://6096dd03.ngrok.io";localStorage.ngrok&&(a=localStorage.ngrok),console.log("starting pump");var n={pump:e,duration:t,pass:document.getElementById("postpass").value};E.a.post(a+"/burst",n,{crossdomain:!0}).then((function(e){console.log(e)}),(function(e){console.log(e)}))}},{key:"stoppump",value:function(e){var t="https://6096dd03.ngrok.io";localStorage.ngrok&&(t=localStorage.ngrok),console.log("stopping pump");var a={pump:e,pass:document.getElementById("postpass").value};E.a.post(t+"/stop",a,{crossdomain:!0}).then((function(e){console.log(e)}),(function(e){console.log(e)}))}},{key:"readsensor",value:function(e){var t="https://6096dd03.ngrok.io";localStorage.ngrok&&(t=localStorage.ngrok);var a={sensor:e,pass:document.getElementById("postpass").value};E.a.post(t+"/sensor",a,{crossdomain:!0}).then((function(e){console.log(e)}),(function(e){console.log(e)}))}},{key:"drawsensorcharts",value:function(){var e=this,t="https://6096dd03.ngrok.io";localStorage.ngrok&&(t=localStorage.ngrok),E.a.post(t+"/fetchsensor",{sensorid:1},{crossdomain:!0}).then((function(t){var a=[["Time","Reading"]];t.data.records.forEach((function(e){return a.push([new Date(e.datetime),e.reading])})),e.drawchartsensor(a,1)}),(function(e){console.log(e)})).then(E.a.post(t+"/fetchsensor",{sensorid:2},{crossdomain:!0}).then((function(t){var a=[["Time","Reading"]];t.data.records.forEach((function(e){return a.push([new Date(e.datetime),e.reading])})),e.drawchartsensor(a,2)}),(function(e){console.log(e)})).then(E.a.post(t+"/fetchsensor",{sensorid:3},{crossdomain:!0}).then((function(t){var a=[["Time","Reading"]];t.data.records.forEach((function(e){return a.push([new Date(e.datetime),e.reading])})),e.drawchartsensor(a,3)}),(function(e){console.log(e)})).then(E.a.post(t+"/fetchsensor",{sensorid:4},{crossdomain:!0}).then((function(t){var a=[["Time","Reading"]];t.data.records.forEach((function(e){return a.push([new Date(e.datetime),e.reading])})),e.drawchartsensor(a,4)}),(function(e){console.log(e)})))))}},{key:"drawchartsensor",value:function(e,t){g.a.load((function(){var a=g.a.api.visualization.arrayToDataTable(e),n={title:"Pump "+t+" Moisture Reading",vAxis:{viewWindow:{max:15e3,min:8e3}}};new g.a.api.visualization.LineChart(document.getElementById("sensor"+t+"chart")).draw(a,n)}))}},{key:"drawpumpcharts",value:function(){var e=this,t="https://6096dd03.ngrok.io";localStorage.ngrok&&(t=localStorage.ngrok),E.a.post(t+"/fetchpump",{pumpid:1},{crossdomain:!0}).then((function(t){var a=[["Time","ON/OFF"]];t.data.records.forEach((function(e){return a.push([new Date(e.datetime),e.value])})),e.drawchartpump(a,1),console.log(t.data.records)}),(function(e){console.log(e)})).then(E.a.post(t+"/fetchpump",{pumpid:2},{crossdomain:!0}).then((function(t){var a=[["Time","ON/OFF"]];t.data.records.forEach((function(e){return a.push([new Date(e.datetime),e.value])})),e.drawchartpump(a,2)}),(function(e){console.log(e)})).then(E.a.post(t+"/fetchpump",{pumpid:3},{crossdomain:!0}).then((function(t){var a=[["Time","ON/OFF"]];t.data.records.forEach((function(e){return a.push([new Date(e.datetime),e.value])})),e.drawchartpump(a,3)}),(function(e){console.log(e)})).then(E.a.post(t+"/fetchpump",{pumpid:4},{crossdomain:!0}).then((function(t){var a=[["Time","ON/OFF"]];t.data.records.forEach((function(e){return a.push([new Date(e.datetime),e.value])})),e.drawchartpump(a,4)}),(function(e){console.log(e)})))))}},{key:"drawchartpump",value:function(e,t){g.a.load((function(){var a=g.a.api.visualization.arrayToDataTable(e),n={title:"Pump "+t+" Activity",vAxis:{viewWindow:{max:2,min:-1}}};new g.a.api.visualization.LineChart(document.getElementById("pump"+t+"chart")).draw(a,n)}))}},{key:"fetchstatus",value:function(){var e=this,t="https://6096dd03.ngrok.io";localStorage.ngrok&&(t=localStorage.ngrok),E.a.post(t+"/fetchstatus",{crossdomain:!0}).then((function(t){e.setState({pump1status:t.data.records[0],pump2status:t.data.records[1],pump3status:t.data.records[2],pump4status:t.data.records[3]}),console.log(e.state.pump1status)}))}},{key:"updatestatus",value:function(e){var t="https://6096dd03.ngrok.io";localStorage.ngrok&&(t=localStorage.ngrok);var a={pumpid:e,status:document.getElementById("checkbox-"+e).checked,pass:document.getElementById("postpass").value};E.a.post(t+"/updatestatus",a,{crossdomain:!0}).then((function(e){console.log(e.data)}))}},{key:"fetchthreshold",value:function(){var e="https://6096dd03.ngrok.io";localStorage.ngrok&&(e=localStorage.ngrok),E.a.post(e+"/fetchthreshold",{crossdomain:!0}).then((function(e){document.getElementById("threshold1").value=e.data.records[0].threshold,document.getElementById("threshold2").value=e.data.records[1].threshold,document.getElementById("threshold3").value=e.data.records[2].threshold,document.getElementById("threshold4").value=e.data.records[3].threshold}))}},{key:"updatethreshold",value:function(e){var t="https://6096dd03.ngrok.io";localStorage.ngrok&&(t=localStorage.ngrok);var a={pumpid:e,threshold:parseInt(document.getElementById("threshold"+e).value),pass:document.getElementById("postpass").value};E.a.post(t+"/updatethreshold",a,{crossdomain:!0}).then((function(e){console.log(e.data)}))}},{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement("div",{className:"settings"},o.a.createElement(v.a,null,o.a.createElement(v.a.Group,{controlId:"postpass"},o.a.createElement(v.a.Label,null,"Post Password"),o.a.createElement(v.a.Control,{type:"text"})))),o.a.createElement("br",null),o.a.createElement("div",{className:"pumprow"},o.a.createElement("span",null,o.a.createElement("div",{className:"heading"},"Pump 1")),o.a.createElement("br",null),o.a.createElement(C,{id:1,status:this.state.pump1status}),o.a.createElement("br",null),o.a.createElement("div",{id:"sensor1chart"}),o.a.createElement("div",{id:"pump1chart"}),o.a.createElement("br",null),o.a.createElement("div",{className:"buttonrow"},o.a.createElement(f.a,{onClick:function(t){return e.startpump(1)}},"Start"),o.a.createElement(f.a,{onClick:function(t){return e.burst(1,1)}},"Run 1 Seconds"),o.a.createElement(f.a,{onClick:function(t){return e.stoppump(1)}},"Stop"),o.a.createElement(f.a,{onClick:function(t){return e.readsensor(1)}},"Sensor"))),o.a.createElement("br",null),o.a.createElement("div",{className:"pumprow"},o.a.createElement("span",null,o.a.createElement("div",{className:"heading"},"Pump 2")),o.a.createElement("br",null),o.a.createElement(C,{id:2,status:this.state.pump2status}),o.a.createElement("br",null),o.a.createElement("div",{id:"sensor2chart"}),o.a.createElement("div",{id:"pump2chart"}),o.a.createElement("br",null),o.a.createElement("div",{className:"buttonrow"},o.a.createElement(f.a,{onClick:function(t){return e.startpump(2)}},"Start"),o.a.createElement(f.a,{onClick:function(t){return e.burst(2,1)}},"Run 1 Seconds"),o.a.createElement(f.a,{onClick:function(t){return e.stoppump(2)}},"Stop"),o.a.createElement(f.a,{onClick:function(t){return e.readsensor(2)}},"Sensor"))),o.a.createElement("br",null),o.a.createElement("div",{className:"pumprow"},o.a.createElement("span",null,o.a.createElement("div",{className:"heading"},"Pump 3")),o.a.createElement("br",null),o.a.createElement(C,{id:3,status:this.state.pump3status}),o.a.createElement("br",null),o.a.createElement("div",{id:"sensor3chart"}),o.a.createElement("div",{id:"pump3chart"}),o.a.createElement("br",null),o.a.createElement("div",{className:"buttonrow"},o.a.createElement(f.a,{onClick:function(t){return e.startpump(3)}},"Start"),o.a.createElement(f.a,{onClick:function(t){return e.burst(3,1)}},"Run 1 Seconds"),o.a.createElement(f.a,{onClick:function(t){return e.stoppump(3)}},"Stop"),o.a.createElement(f.a,{onClick:function(t){return e.readsensor(3)}},"Sensor"))),o.a.createElement("br",null),o.a.createElement("div",{className:"pumprow"},o.a.createElement("span",null,o.a.createElement("div",{className:"heading"},"Pump 4")),o.a.createElement("br",null),o.a.createElement(C,{id:4,status:this.state.pump4status}),o.a.createElement("br",null),o.a.createElement("div",{id:"sensor4chart"}),o.a.createElement("div",{id:"pump4chart"}),o.a.createElement("br",null),o.a.createElement("div",{className:"buttonrow"},o.a.createElement(f.a,{onClick:function(t){return e.startpump(4)}},"Start"),o.a.createElement(f.a,{onClick:function(t){return e.burst(4,1)}},"Run 1 Seconds"),o.a.createElement(f.a,{onClick:function(t){return e.stoppump(4)}},"Stop"),o.a.createElement(f.a,{onClick:function(t){return e.readsensor(4)}},"Sensor"))))}}]),t}(o.a.Component),I=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(i.a)(t).call(this,e))).updateNgrok=a.updateNgrok.bind(Object(y.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"updateNgrok",value:function(){"orange1234"==document.getElementById("ngroksecret").value&&(localStorage.ngrok=document.getElementById("ngrokovrd").value)}},{key:"render",value:function(){return o.a.createElement("div",{className:"settings"},o.a.createElement(v.a,null,o.a.createElement(v.a.Group,{controlId:"ngroksecret"},o.a.createElement(v.a.Label,null,"Ngrok Secret"),o.a.createElement(v.a.Control,{type:"text"}))),o.a.createElement(v.a,null,o.a.createElement(v.a.Group,{controlId:"ngrokovrd"},o.a.createElement(v.a.Label,null,"Ngrok Override"),o.a.createElement(v.a.Control,{type:"text"}))),o.a.createElement(f.a,{onClick:this.updateNgrok},"Save"))}}]),t}(o.a.Component),N=function(e){function t(e){return Object(s.a)(this,t),Object(u.a)(this,Object(i.a)(t).call(this,e))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e="https://6096dd03.ngrok.io";localStorage.ngrok&&(e=localStorage.ngrok),document.getElementById("imagebox").innerHTML='<img src="'+e+'/latestpic">'}},{key:"render",value:function(){return o.a.createElement("div",{id:"imagebox"})}}]),t}(o.a.Component),R=function(e){function t(e){return Object(s.a)(this,t),Object(u.a)(this,Object(i.a)(t).call(this,e))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"gotoMainPage",value:function(){r.a.render(o.a.createElement(T,null),document.getElementById("mainbody"))}},{key:"gotoSettings",value:function(){r.a.render(o.a.createElement(I,null),document.getElementById("mainbody"))}},{key:"gotoCamera",value:function(){r.a.render(o.a.createElement(N,null),document.getElementById("mainbody"))}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(m.a,{bg:"light"},o.a.createElement(m.a.Brand,{onClick:this.gotoMainPage},"Home"),o.a.createElement(p.a,{className:"mr-auto"},o.a.createElement(p.a.Link,{onClick:this.gotoSettings},"Settings"),o.a.createElement(p.a.Link,{onClick:this.gotoCamera},"Camera"))),o.a.createElement("br",null),o.a.createElement("div",{id:"mainbody"}))}}]),t}(o.a.Component);r.a.render(o.a.createElement(R,null),document.getElementById("root"))}},[[57,1,2]]]);
//# sourceMappingURL=main.bc2a0e23.chunk.js.map